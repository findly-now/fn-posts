# Posts Domain - Cloud Environment Configuration
# Copy to .env and update with your actual cloud credentials

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
PORT=8080
ENVIRONMENT=production

# =============================================================================
# POSTS DATABASE CONFIGURATION (PostgreSQL + PostGIS)
# =============================================================================
# Domain-specific database connection for complete database isolation
POSTGRES_URL=postgresql://posts_user:your-password@posts-db.your-project.co:5432/posts_db?sslmode=require

# Database isolation: Posts domain only accesses posts_db
# Other services have their own databases:
# - fn-notifications → notifications_db
# - fn-matcher → matcher_db
# - fn-media-ai → media_ai_db

# =============================================================================
# GOOGLE CLOUD STORAGE CONFIGURATION
# =============================================================================
# GCS project and bucket configuration
BUCKET_PROJECT_ID=your-gcp-project-id
BUCKET_NAME=posts-bucket-prod

# Service account authentication
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json
# Alternative: Use environment variable for key content in containerized environments
BUCKET_SERVICE_ACCOUNT_KEY=base64-encoded-service-account-json

# GCS settings
BUCKET_USE_CDN=true
BUCKET_CDN_DOMAIN=https://cdn.yourdomain.com

# =============================================================================
# CONFLUENT CLOUD CONFIGURATION (Kafka)
# =============================================================================
# Confluent Cloud cluster configuration
KAFKA_BOOTSTRAP_SERVERS=your-cluster-id.us-west-2.aws.confluent.cloud:9092
KAFKA_API_KEY=your-kafka-api-key
KAFKA_API_SECRET=your-kafka-api-secret

# Kafka topics
KAFKA_TOPIC=posts.events

# Kafka producer settings
KAFKA_BATCH_SIZE=100
KAFKA_BATCH_TIMEOUT=10ms
KAFKA_RETRIES=3
KAFKA_ACKS=1

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================
# JWT configuration
JWT_SECRET=your-super-secure-jwt-secret-change-in-production
JWT_EXPIRY=24h

# CORS settings for production
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Authorization,Content-Type

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Logging configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Metrics and monitoring
METRICS_ENABLED=true
METRICS_PORT=9090

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5s

# =============================================================================
# RATE LIMITING & PERFORMANCE
# =============================================================================
# API rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# Connection pool settings
DB_MAX_OPEN_CONNECTIONS=25
DB_MAX_IDLE_CONNECTIONS=10
DB_CONNECTION_MAX_LIFETIME=1h

# File upload limits
MAX_FILE_SIZE=10MB
MAX_FILES_PER_POST=10

# =============================================================================
# CACHE CONFIGURATION (Optional - Redis)
# =============================================================================
# Redis configuration for caching (optional)
REDIS_URL=redis://your-redis-host:6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=0
REDIS_TTL=3600

# Cache settings
CACHE_ENABLED=true
CACHE_NEARBY_POSTS_TTL=300s
CACHE_PHOTO_URLS_TTL=3600s

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# Environment-specific feature toggles
FEATURE_ANALYTICS_ENABLED=true
FEATURE_REAL_TIME_UPDATES=true
FEATURE_IMAGE_OPTIMIZATION=true
FEATURE_THUMBNAIL_GENERATION=true

# =============================================================================
# CLOUD PROVIDER SPECIFIC SETTINGS
# =============================================================================
# Google Cloud Platform region
GCP_REGION=us-central1

# Supabase region (for reference)
SUPABASE_REGION=us-east-1

# Confluent Cloud region
CONFLUENT_REGION=us-west-2

# =============================================================================
# BACKUP & DISASTER RECOVERY
# =============================================================================
# Backup configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================
# Set to false in production
DEBUG_ENABLED=false
PROFILING_ENABLED=false

# Request tracing
TRACING_ENABLED=true
TRACE_SAMPLE_RATE=0.1

# =============================================================================
# NOTIFICATION SETTINGS (Future)
# =============================================================================
# Email service configuration (placeholder for future features)
EMAIL_SERVICE_ENABLED=false
EMAIL_API_KEY=your-email-service-api-key

# Push notification service (placeholder)
PUSH_NOTIFICATIONS_ENABLED=false
FCM_SERVER_KEY=your-fcm-server-key