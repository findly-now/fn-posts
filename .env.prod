# fn-posts Production Environment Configuration for GKE

# Service Configuration
PORT=8080
ENVIRONMENT=production

# Database (Supabase PostgreSQL)
DATABASE_URL=${DATABASE_URL}  # Injected from Kubernetes secret
POSTGRES_URL=${DATABASE_URL}
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
SUPABASE_SERVICE_ROLE_KEY=${SUPABASE_SERVICE_ROLE_KEY}
SUPABASE_JWT_SECRET=${SUPABASE_JWT_SECRET}

# Google Cloud Storage (using Workload Identity)
BUCKET_PROJECT_ID=findly-now-prod
BUCKET_NAME=findly-posts-prod
# No credentials needed - using Workload Identity
GOOGLE_APPLICATION_CREDENTIALS=""
BUCKET_CDN_DOMAIN=https://cdn.findlynow.com

# Kafka (Confluent Cloud)
KAFKA_BOOTSTRAP_SERVERS=${KAFKA_BOOTSTRAP_SERVERS}
KAFKA_API_KEY=${KAFKA_API_KEY}
KAFKA_API_SECRET=${KAFKA_API_SECRET}
KAFKA_TOPIC=posts.events
KAFKA_BATCH_SIZE=500
KAFKA_BATCH_TIMEOUT=10ms
KAFKA_RETRIES=3
KAFKA_ACKS=all

# JWT Authentication
JWT_SECRET=${JWT_SECRET}
JWT_EXPIRY=24h

# Feature Flags
FEATURE_ANALYTICS_ENABLED=true
FEATURE_REAL_TIME_UPDATES=true
FEATURE_IMAGE_OPTIMIZATION=true
FEATURE_THUMBNAIL_GENERATION=true

# Monitoring
LOG_LEVEL=info
LOG_FORMAT=json
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
TRACING_ENABLED=true
TRACE_SAMPLE_RATE=0.1

# Performance
MAX_UPLOAD_SIZE=20MB
REQUEST_TIMEOUT=30s
IDLE_TIMEOUT=120s
DB_MAX_CONNECTIONS=50
DB_IDLE_CONNECTIONS=10